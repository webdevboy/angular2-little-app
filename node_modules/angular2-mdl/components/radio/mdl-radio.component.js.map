{"version":3,"file":"mdl-radio.component.js","sourceRoot":"","sources":["../../../src/lib/components/radio/mdl-radio.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n    Component,\n    ElementRef,\n    Output,\n    EventEmitter,\n    Renderer,\n    forwardRef,\n    Input,\n    NgModule,\n    OnInit,\n    Injectable,\n    OnDestroy,\n    ViewEncapsulation,\n    ModuleWithProviders,\n    Optional\n} from '@angular/core';\nimport {\n    NG_VALUE_ACCESSOR,\n    ControlValueAccessor,\n    FormsModule,\n    FormGroupName\n} from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { BooleanProperty } from '../common/boolean-property';\nimport { NumberProperty } from '../common/number.property';\n\n\nconst noop = () => {};\nconst IS_FOCUSED = 'is-focused';\n\n// Registry for mdl-readio compnents. Is responsible to keep the\n// right state of the radio buttons of a radio group. It would be\n// easier if i had a mdl-radio-group component. but this would be\n// a big braking change.\n\nexport class MdlRadioGroupRegisty {\n\n  private defaultFormGroup  = 'defaultFromGroup';\n  private radioComponents: {radio: MdlRadioComponent, group: FormGroupName | string}[] = [];\n\n  public add(radioComponent: MdlRadioComponent, formGroupName: FormGroupName) {\n    this.radioComponents.push({\n      radio: radioComponent,\n      group: formGroupName || this.defaultFormGroup\n    });\n  }\n\n  public remove(radioComponent: MdlRadioComponent) {\n    this.radioComponents = this.radioComponents.filter( (radioComponentInArray) => {\n      return (radioComponentInArray.radio !== radioComponent);\n    });\n  }\n\n  public select(radioComponent: MdlRadioComponent, formGroupName: FormGroupName) {\n    // unselect every radioComponent that is not the provided radiocomponent\n    // and has the same name and is in teh same group.\n    let groupToTest = formGroupName || this.defaultFormGroup;\n    this.radioComponents.forEach( (component) => {\n      if (component.radio.name === radioComponent.name && component.group === groupToTest) {\n        if (component.radio !== radioComponent) {\n          component.radio.deselect(radioComponent.value);\n        }\n      }\n    });\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\n/*\n <mdl-radio name=\"group1\" value=\"1\" [(ngModel)]=\"radioOption\">Value 1</mdl-radio>\n */\n\n\nexport class MdlRadioComponent implements ControlValueAccessor, OnInit, OnDestroy {\n\n   public name: string;\n   public formControlName: string;\n   public value: any;\n   @BooleanProperty() public disabled = false;\n   @NumberProperty() public tabindex: number = 1;\n\n   public change: EventEmitter<any> = new EventEmitter<any>();\n\n  public optionValue: any;\n  // the internal state - used to set the underlaying radio button state.\n  public checked = false;\n\n  private el: HTMLElement;\n  private onTouchedCallback: () => void = noop;\n  private onChangeCallback: () => void = noop;\n\n\n  constructor(\n      private elementRef: ElementRef,\n      private renderer: Renderer,\n      private ragioGroupRegisty: MdlRadioGroupRegisty,\n       private formGroupName: FormGroupName) {\n    this.el = elementRef.nativeElement;\n  }\n\n  public ngOnInit() {\n    // we need a name and it must be the same as in the formcontrol.\n    // a radio group without name is useless.\n    this.checkName();\n    // register the radio button - this is the only chance to unselect the\n    // radio button that is no longer active - scope the radio button with it's group\n    // if there is one.\n    this.ragioGroupRegisty.add(this, this.formGroupName);\n  }\n\n  public ngOnDestroy() {\n    this.ragioGroupRegisty.remove(this);\n  }\n\n  public writeValue(optionValue: any): void {\n    this.optionValue = optionValue;\n    this.updateCheckState();\n  }\n\n  public deselect(value: any) {\n    // called from the registry. the value is the value of the selected radio button\n    // e.g. the radio button get unselected if it isnÃ„t the selected one.\n    this.writeValue(value);\n  }\n\n  public registerOnChange(fn: any): void {\n    // wrap the callback, so that we can call select on the registry\n    this.onChangeCallback = () => {\n      fn(this.value);\n      this.ragioGroupRegisty.select(this, this.formGroupName);\n    };\n  }\n\n  public registerOnTouched(fn: any): void {\n    this.onTouchedCallback = fn;\n  }\n\n  public setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n\n  protected onFocus() {\n    this.renderer.setElementClass(this.el, IS_FOCUSED, true);\n  }\n\n  protected onBlur() {\n    this.renderer.setElementClass(this.el, IS_FOCUSED, false);\n  }\n\n  protected onClick() {\n    if (this.disabled) {\n      return;\n    }\n    this.optionValue = this.value;\n    this.updateCheckState();\n    this.onChangeCallback();\n    this.change.emit(this.optionValue);\n  }\n\n  private updateCheckState() {\n    this.checked = this.optionValue === this.value;\n  }\n\n  private checkName(): void {\n    if (this.name && this.formControlName && this.name !== this.formControlName) {\n      this.throwNameError();\n    }\n    if (!this.name && this.formControlName) {\n      this.name = this.formControlName;\n    }\n  }\n\n  private throwNameError(): void {\n    throw new Error(`\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <mdl-radio formControlName=\"food\" name=\"food\"></mdl-radio>\n    `);\n  }\n\n  spaceKeyPress(event) {\n    this.checked = false;//in case of space key is pressed radio button value must remain same\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'mdl-radio',\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => MdlRadioComponent),\n    multi: true\n  }],\n  host: {\n    '(click)': 'onClick()',\n    '[class.mdl-radio]': 'true',\n    '[class.is-upgraded]': 'true',\n    '[class.is-checked]': 'checked',\n    '[class.is-disabled]': 'disabled'\n  },\n  template: `\n  <input type=\"checkbox\" class=\"mdl-radio__button\" \n    [attr.name]=\"name\"\n    (focus)=\"onFocus()\" \n    (blur)=\"onBlur()\"\n    (keyup.space)=\"spaceKeyPress($event)\"\n    [disabled]=\"disabled\"\n    [tabindex]=\"tabindex\"\n    [(ngModel)]=\"checked\">\n  <span class=\"mdl-radio__label\"><ng-content></ng-content></span>\n  <span class=\"mdl-radio__outer-circle\"></span>\n  <span class=\"mdl-radio__inner-circle\"></span>\n  `,\n  encapsulation: ViewEncapsulation.None\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n{type: Renderer, },\n{type: MdlRadioGroupRegisty, },\n{type: FormGroupName, decorators: [{ type: Optional }, ]},\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'name': [{ type: Input },],\n'formControlName': [{ type: Input },],\n'value': [{ type: Input },],\n'disabled': [{ type: Input },],\n'tabindex': [{ type: Input },],\n'change': [{ type: Output },],\n};\n}\n\n\n\nexport class MdlRadioModule {\n  public static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: MdlRadioModule,\n      providers: [MdlRadioGroupRegisty]\n    };\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n  imports: [CommonModule, FormsModule],\n  exports: [MdlRadioComponent],\n  declarations: [MdlRadioComponent]\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}